<!DOCTYPE>

<html>
  <head>
    <script type="text/javascript" src="js/lib/underscore-min.js"></script>
    <script type="text/javascript" src="js/lib/phaser.min.js"></script>
  </head>

  <script type="text/javascript">
    var game = new Phaser.Game(400, 400, Phaser.AUTO, '', { preload: preload, create: create, update: update });

    var player;
    var baddies;
    var cursors;

    function preload(){
      game.load.image('star', 'assets/star.png');
      game.load.image('mushroom', 'assets/mushroom.png');
    }

    function create(){
      // Player
      player = game.add.sprite((game.world.width / 2) - 12, (game.world.height / 2) - 11, 'star');
      game.physics.enable(player, Phaser.Physics.ARCADE);
      player.body.collideWorldBounds = true;

      // Baddies
      baddies = game.add.group();

      game.time.events.loop(Phaser.Timer.SECOND * 2, function(i){
        var startX = Math.round(Math.random()*400);
        var startY = -25;
        var baddy = baddies.create(startX, startY, 'mushroom');
        game.physics.enable(baddy, Phaser.Physics.ARCADE);
        baddy.body.velocity.x = Math.round(Math.random()*100);
        baddy.body.velocity.y = 100 - baddy.body.velocity.x;
      }, this);

      cursors = game.input.keyboard.createCursorKeys();
    }

    function update(){
      game.physics.arcade.overlap(player, baddies, killPlayer, null, this);

      // Player
      player.body.velocity.x = 0;
      player.body.velocity.y = 0;

      if (cursors.left.isDown) {
        player.body.velocity.x = -150;
      } else if (cursors.right.isDown){
        player.body.velocity.x = 150;
      } else if (cursors.up.isDown){
        player.body.velocity.y = -150;
      } else if (cursors.down.isDown){
        player.body.velocity.y = 150;
      }

      // Baddies
    }

    function killPlayer(player, baddy){
      player.kill();
    }

  </script>

  <body>
  </body>
</html>


